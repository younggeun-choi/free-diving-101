# PRD-02: 프렌젤 이퀄라이징 훈련 기능

## 문서 정보

- **문서 번호**: PRD-02
- **버전**: 2.0
- **작성일**: 2025-10-31
- **최종 수정일**: 2025-11-05
- **목적**: 10일 프렌젤 이퀄라이징 훈련 프로그램 요구사항 명세

---

## 1. 프로젝트 개요

**Free Diving 101** 앱의 핵심 기능인 **프렌젤 이퀄라이징 훈련 프로그램**을 구현합니다. 이 기능은 초보 프리다이버가 체계적으로 프렌젤 기술을 습득할 수 있도록 10일간의 단계별 훈련 프로그램을 제공합니다.

### 핵심 목표

- 프렌젤 이퀄라이징에 대한 교육 콘텐츠 제공 (개요, 원리, 발살바 비교)
- 10일 훈련 스케줄 제공 (Day 1 ~ Day 10)
- 각 Day별 훈련 타이머 기능
- 훈련 완료 기록 저장 및 히스토리 추적
- 다국어 지원 (한국어, 영어)

### 사용자 스토리

**AS** 초보 프리다이버
**I WANT** 프렌젤 이퀄라이징을 체계적으로 배우고
**SO THAT** 깊은 수심에서도 안전하게 귀 압력을 평형시킬 수 있다

**주요 시나리오**:

1. **교육 콘텐츠 확인**: 사용자는 프렌젤이 무엇인지, 왜 필요한지, 어떻게 작동하는지 앱에서 학습한다
2. **훈련 프로그램 탐색**: 사용자는 10일 훈련 프로그램의 각 Day별 목표와 단계를 확인한다
3. **훈련 실행**: 사용자는 특정 Day를 선택하여 타이머 기반 훈련을 실행한다
4. **기록 추적**: 사용자는 완료한 훈련을 히스토리에서 확인하고 진행 상황을 추적한다

---

## 2. 기능 명세

### 2.1 교육 콘텐츠

Equalizing 메인 화면에 아코디언 형태로 제공:

1. **프렌젤의 개요**: 프렌젤 이퀄라이징이란 무엇인가?
2. **프렌젤의 원리**: 후두, 연부구개, 혀의 역할
3. **발살바와 프렌젤의 차이점**: 왜 프렌젤이 깊은 다이빙에 필수인가?

### 2.2 10일 훈련 프로그램

| Day | 제목 | 훈련 시간 | 목표 |
|-----|------|----------|------|
| 1 | 후두 감각 익히기 | 10분 | 후두(Glottis)를 닫는 감각을 명확히 인식 |
| 2 | 후두 제어 심화 | 15분 | 후두의 열림과 닫힘을 의식적으로 제어 |
| 3 | 연부구개 감각 익히기 | 10분 | 코로 가는 통로(연부구개)의 열림과 닫힘을 구분 |
| 4 | 연부구개 제어 심화 | 15분 | 연부구개 열림/닫힘을 자유롭게 전환 |
| 5 | 혀의 K/T 동작 기초 | 15분 | 혀의 위치와 공기 밀기 동작을 익힘 |
| 6 | 혀의 피스톤 압력 제어 | 15분 | 혀의 움직임으로 공기 압력을 일정하게 제어 |
| 7 | 감각 통합 1단계 | 20분 | 후두 닫힘 + 연부구개 열림 + 혀 피스톤 동시 수행 |
| 8 | 감각 통합 2단계 (리듬) | 20분 | 프렌젤 동작을 리듬감 있게 자동화 |
| 9 | Head-first 프렌젤 적응 1단계 | 15~20분 | 머리 아래(head-down) 자세에서 연부구개 유지 |
| 10 | Head-first 프렌젤 완성 | 20~25분 | 완전한 머리 아래 자세(90°)에서도 안정적 프렌젤 수행 |

### 2.3 타이머 기능

- Day별 설정된 훈련 시간에 맞춘 카운트다운 타이머
- 타이머 시작/일시정지/재개/완료/취소 기능
- 백그라운드 실행 및 로컬 알림
- 훈련 완료 시 히스토리 자동 저장

### 2.4 UI 컴포넌트

React Native Reusables를 사용한 UI 구현:
- Accordion (교육 콘텐츠 펼치기/접기)
- Card (Day 리스트 및 상세 정보)
- Button (훈련 컨트롤)
- Badge (Day 번호 및 완료 상태)

---

## 3. 데이터 모델 참조

### 3.1 엔티티 구조

| 엔티티 | 파일 위치 | 설명 |
|--------|----------|------|
| FrenzelDay | `/src/entities/frenzel-training/model.ts` | 각 Day의 훈련 정보 (제목, 목표, 시간, 단계) |
| FrenzelSession | `/src/entities/frenzel-training/model.ts` | 훈련 기록 (시작/종료 시간, 완료 여부, Day 번호) |
| FRENZEL_TRAINING_SCHEDULE | `/src/entities/frenzel-training/constants.ts` | 10일 훈련 프로그램 전체 데이터 |

**주요 필드:**
- `FrenzelDay`: dayNumber (1-10), title (i18n 키), goal, durationMinutes, steps[], successCriteria
- `FrenzelSession`: id (UUID), dayNumber, startTime, endTime, completed, notes

**참고**: 실제 스키마 정의는 해당 파일 참조

---

## 4. i18n 키 구조

### 4.1 번역 키 구조

```json
{
  "equalizing": {
    "title": "프렌젤 이퀄라이징 훈련",
    "overview": {
      "title": "프렌젤의 개요",
      "content": "..."
    },
    "principle": {
      "title": "프렌젤의 원리",
      "content": "...",
      "glottis": "...",
      "softPalate": "...",
      "tongue": "..."
    },
    "comparison": {
      "title": "발살바와 프렌젤의 차이점",
      "valsalva": "발살바(Valsalva)",
      "frenzel": "프렌젤(Frenzel)",
      ...
    },
    "day1": {
      "title": "후두 감각 익히기",
      "goal": "후두(Glottis)를 닫는 감각을 명확히 인식한다.",
      "step1": "...",
      "step2": "...",
      ...
      "success": "..."
    },
    ... // day2 ~ day10 동일 패턴
  },
  "timer": {
    "start": "훈련 시작",
    "pause": "일시정지",
    "resume": "재개",
    "complete": "완료",
    "cancel": "취소",
    "paused": "(일시정지)"
  }
}
```

**참고**: 전체 번역은 `/src/shared/locales/ko.json`, `/src/shared/locales/en.json` 참조

---

## 5. 검증 기준

### 5.1 데이터 모델
- [ ] Zod 스키마 검증이 정상 동작
- [ ] FrenzelDay, FrenzelSession 타입이 올바르게 추론됨
- [ ] FRENZEL_TRAINING_SCHEDULE에 10개 Day 데이터 정의됨

### 5.2 화면 구현
- [ ] Equalizing 메인 화면:
  - [ ] 3개 아코디언(개요/원리/비교) 정상 표시
  - [ ] 10일 리스트가 스크롤 가능하게 표시됨
  - [ ] Day 클릭 시 상세 화면으로 이동
- [ ] Day 상세/타이머 화면:
  - [ ] 목표, 단계, 성공 감각 정상 표시
  - [ ] 타이머 시작/일시정지/재개/완료/취소 기능 동작
  - [ ] 훈련 완료 시 히스토리 저장

### 5.3 UI 컴포넌트
- [ ] Accordion, Card, Button, Badge 정상 동작
- [ ] NativeWind 스타일링 호환
- [ ] 다크 모드 지원

### 5.4 i18n
- [ ] 모든 UI 텍스트가 i18n 키로 관리됨
- [ ] 한국어(ko) 번역 완료
- [ ] 영어(en) 번역 완료
- [ ] 언어 변경 시 즉시 반영

### 5.5 코드 품질
- [ ] TypeScript 컴파일 오류 없음
- [ ] ESLint 오류 없음
- [ ] React Compiler 호환 (수동 메모이제이션 미사용)

---

## 6. 비기능 요구사항

### 6.1 성능
- 타이머 정확도: ±1초 이내
- 화면 전환 딜레이: < 300ms
- 백그라운드 타이머 오차: ±5초 이내

### 6.2 접근성
- 모든 버튼에 접근 가능한 레이블
- 타이머 숫자는 큰 폰트 (48px 이상)
- 색상 대비 WCAG AA 준수

### 6.3 호환성
- iOS 13+ 지원
- Android 5.0+ 지원
- Expo Go 환경에서 테스트

### 6.4 보안
- 사용자 데이터는 로컬에만 저장 (AsyncStorage 또는 Zustand persist)
- 외부 네트워크 요청 없음

---

## 7. 제외 사항

다음 요소들은 **구현하지 않습니다**:

- ❌ 고급 히스토리 분석 (진행률 차트, 통계)
- ❌ 음성 안내 (TTS)
- ❌ 진동 피드백 (haptics)
- ❌ 테스트 코드 (별도 PRD에서 추가)

---

## 8. 참고사항

### 8.1 CLAUDE.md 준수

이 PRD는 CLAUDE.md의 다음 원칙을 따릅니다:

- Feature-Sliced Design: entities → features → app 계층 구조
- React Compiler 사용 (수동 useMemo/useCallback 금지)
- TypeScript strict mode
- Zod 스키마 우선 검증
- i18n 다국어 지원
- NativeWind 스타일링

### 8.2 what-is-frenzel.md 통합

- 모든 교육 콘텐츠를 i18n 키로 변환하여 앱 내 통합
- 10일 훈련 프로그램 데이터를 constants로 정의
- 마크다운 콘텐츠를 React Native에서 표시 가능하도록 변환

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|-----|------|---------|--------|
| 1.0 | 2025-10-31 | 초안 작성 | Claude |
| 1.1 | 2025-10-31 | React Native Reusables UI 컴포넌트 추가 | Claude |
| 2.0 | 2025-11-05 | 문서 간소화 - 구현 세부사항 제거, 요구사항 중심으로 재구성 | Claude |
